{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/anuragkalra/safekeep-workspace/v2-workspace/quimby/frontend/src/ParticipantLog.js\";\nimport './ParticipantLog.sass';\nimport React from 'react';\nimport { PieChart } from 'react-minimal-pie-chart';\n\nclass ParticipantLog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dummy: 0,\n      users: [],\n      usersSum: []\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:9000/participants').then(res => res.json()).then(users => this.setState({\n      users\n    }));\n    fetch('http://localhost:9000/participantSums').then(res => res.json()).then(usersSum => this.setState({\n      usersSum\n    }));\n  }\n\n  componentDidUpdate(prevProps) {\n    console.log(this.props.counter);\n\n    if (this.props.counter !== prevProps.counter) {\n      console.log('in the condition');\n      fetch('http://localhost:9000/participants').then(res => res.json()).then(users => this.setState({\n        users\n      }));\n    }\n  }\n\n  handleDelete(id) {\n    console.log(id);\n    let url = 'http://localhost:9000/participants?id=' + id;\n    console.log(url);\n    fetch(url, {\n      method: 'DELETE'\n    });\n    window.location.reload();\n  }\n\n  render() {\n    let data = []; //Limited to this set of colors currently\n\n    let colors = [\"#A0E7E5\", \"#B4F8C8\", \"#AC19DD\", \"#98DE6C\" //\"#BB88C0\", \"#AAC8DF\", \"#ABCDEF\", \"#AB0624\", \"#B74ADA\", \"#776426\", \"#37AB5B\"\n    ];\n    this.state.users.forEach((e, i) => data.push({\n      title: e.first_name,\n      value: parseInt(e.hours),\n      color: colors[i % colors.length]\n    }));\n    let totalHours = 0;\n    let sumData = [];\n\n    for (let i = 0; i < this.state.usersSum.length; i++) {\n      sumData.push({\n        title: this.state.usersSum[i].first_name + ' ' + this.state.usersSum[i].last_name,\n        value: parseInt(this.state.usersSum[i].hours),\n        color: colors[i % colors.length]\n      });\n      totalHours += parseInt(this.state.usersSum[i].hours);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Participant Log\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"New Pie Chart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PieChart, {\n        style: {\n          height: \"200px\",\n          fontSize: \"50%\"\n        },\n        label: ({\n          dataEntry\n        }) => `${Math.round(dataEntry.percentage)} %`,\n        data: sumData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Participants\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"Participants\",\n        children: sumData.map((e, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            backgroundColor: colors[i]\n          },\n          children: [e.title, \" Hours: \", e.value, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 44\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Transactions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"First Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Last Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Hours\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Participation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), this.state.users.map(u => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: u.first_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: u.last_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: u.hours\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: Math.round(100 * u.hours / totalHours) + \"%\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: e => this.handleDelete(u.id, e),\n                children: \"X\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default ParticipantLog;","map":{"version":3,"sources":["/Users/anuragkalra/safekeep-workspace/v2-workspace/quimby/frontend/src/ParticipantLog.js"],"names":["React","PieChart","ParticipantLog","Component","constructor","props","state","dummy","users","usersSum","componentDidMount","fetch","then","res","json","setState","componentDidUpdate","prevProps","console","log","counter","handleDelete","id","url","method","window","location","reload","render","data","colors","forEach","e","i","push","title","first_name","value","parseInt","hours","color","length","totalHours","sumData","last_name","height","fontSize","dataEntry","Math","round","percentage","map","backgroundColor","u"],"mappings":"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","sourcesContent":["import './ParticipantLog.sass'\nimport React from 'react';\nimport { PieChart } from 'react-minimal-pie-chart';\n\nclass ParticipantLog extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            dummy : 0,\n            users : [],\n            usersSum : []\n        }\n    }\n\n    componentDidMount() {\n        fetch('http://localhost:9000/participants')\n        .then(res => res.json())\n        .then(users => this.setState({ users }));\n\n        fetch('http://localhost:9000/participantSums')\n        .then(res => res.json())\n        .then(usersSum => this.setState({usersSum}))\n    }\n\n    componentDidUpdate(prevProps) {\n        console.log(this.props.counter)\n        if (this.props.counter !== prevProps.counter) {\n            console.log('in the condition')\n            fetch('http://localhost:9000/participants')\n            .then(res => res.json())\n            .then(users => this.setState({ users }));\n        }\n    }\n\n    handleDelete(id) {\n        console.log(id)\n        let url = 'http://localhost:9000/participants?id=' + id\n        console.log(url)\n        fetch(url, {\n            method : 'DELETE'\n        })\n        window.location.reload();\n    }\n\n    render() {\n        let data = []\n        //Limited to this set of colors currently\n        let colors = [\n            \"#A0E7E5\", \"#B4F8C8\", \"#AC19DD\", \"#98DE6C\", //\"#BB88C0\", \"#AAC8DF\", \"#ABCDEF\", \"#AB0624\", \"#B74ADA\", \"#776426\", \"#37AB5B\"\n        ]\n\n        this.state.users.forEach((e, i) => data.push(\n            {\n                title: e.first_name,\n                value: parseInt(e.hours),\n                color: colors[i%colors.length]\n            })\n        )\n\n        let totalHours = 0;\n        let sumData = []\n        for (let i = 0; i < this.state.usersSum.length; i++) {\n            sumData.push(\n                {\n                    title : this.state.usersSum[i].first_name + ' ' + this.state.usersSum[i].last_name,\n                    value: parseInt(this.state.usersSum[i].hours),\n                    color: colors[i%colors.length]\n                }\n            )\n            totalHours += parseInt(this.state.usersSum[i].hours)\n        }\n\n        return (\n            <div>\n                <h1>Participant Log</h1>\n                <h2>New Pie Chart</h2>\n                <PieChart style={{height:\"200px\", fontSize:\"50%\"}}\n                    label={\n                        ({ dataEntry }) => `${Math.round(dataEntry.percentage)} %`\n                    }\n                    data={sumData}\n                />\n                <h2>Participants</h2>\n                <ul className=\"Participants\">\n                    {sumData.map((e, i) => <li style={{backgroundColor:colors[i]}}>{e.title} Hours: {e.value} </li>)}\n                </ul>\n                <div>\n                <h2>Transactions</h2>\n                <table>\n                    <tr>\n                        <th>First Name</th>\n                        <th>Last Name</th>\n                        <th>Hours</th>\n                        <th>Participation</th>\n                        <th>Delete</th>\n                    </tr>\n                    {this.state.users.map(u =>\n                    <tr>\n                        <td>{u.first_name}</td>\n                        <td>{u.last_name}</td>\n                        <td>{u.hours}</td>\n                        <td>{Math.round(100 * u.hours/totalHours) + \"%\"}</td>\n                        <td><button onClick={(e) => this.handleDelete(u.id, e)}>X</button></td>\n                    </tr>\n                    )}\n                </table>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ParticipantLog;"]},"metadata":{},"sourceType":"module"}